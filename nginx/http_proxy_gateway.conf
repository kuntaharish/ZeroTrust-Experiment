server {
    listen 80;

    proxy_http_version 1.1;
    proxy_set_header Connection "";
    proxy_set_header X-Workload-Id "http-proxy";

    location = /health { return 200 "ok\n"; }

    # Keep old behavior working
    location / { proxy_pass http://service-a:5000/; }

    # ✅ Add /a/ route so latency benchmarks can call /a/hop consistently
    # Trailing slash strips "/a/" prefix when proxying → backend sees "/hop"
    location /a/ { proxy_pass http://service-a:5000/; }
}
